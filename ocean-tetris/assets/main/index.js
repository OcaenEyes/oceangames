System.register("chunks:///_virtual/core.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,o,s,c,e,l,h,r,n,u,k,B,a,P,b,p,y,g,m,_,x;return{setters:[function(t){i=t.applyDecoratedDescriptor,o=t.inheritsLoose,s=t.initializerDefineProperty,c=t.assertThisInitialized},function(t){e=t.cclegacy,l=t._decorator,h=t.Node,r=t.Prefab,n=t.Button,u=t.Label,k=t.log,B=t.screen,a=t.find,P=t.Widget,b=t.UITransform,p=t.instantiate,y=t.v2,g=t.KeyCode,m=t.Input,_=t.input,x=t.Component}],execute:function(){var f,C,S,z,d,v,w,T,L,R,D,G,O,E,H,W,M,U,K,A,N,V,Y,Z,F,I,j,q,J,Q,X,$,tt,it,ot,st,ct;e._RF.push({},"3ab658/zE5BzLe2ahh0l8s3","core",void 0);var et=l.ccclass,lt=l.property;t("core",(f=et("core"),C=lt(h),S=lt(r),z=lt(h),d=lt(r),v=lt(r),w=lt(r),T=lt(r),L=lt(r),R=lt(r),D=lt(r),G=lt(n),O=lt(n),E=lt(n),H=lt(n),W=lt(r),M=lt(h),U=lt(u),f((N=i((A=function(t){function i(){for(var i,o=arguments.length,e=new Array(o),l=0;l<o;l++)e[l]=arguments[l];return i=t.call.apply(t,[this].concat(e))||this,s(i,"gcBgLayout",N,c(i)),s(i,"gbBlock",V,c(i)),s(i,"gcLayout",Y,c(i)),s(i,"gameBlock0",Z,c(i)),s(i,"gameBlock1",F,c(i)),s(i,"gameBlock2",I,c(i)),s(i,"gameBlock3",j,c(i)),s(i,"gameBlock4",q,c(i)),s(i,"gameBlock5",J,c(i)),s(i,"gameBlock6",Q,c(i)),s(i,"leftBtn",X,c(i)),s(i,"topBtn",$,c(i)),s(i,"rightBtn",tt,c(i)),s(i,"bottomBtn",it,c(i)),s(i,"gameBlockCenter",ot,c(i)),s(i,"testLayout",st,c(i)),s(i,"scoreValue",ct,c(i)),i.rand=null,i._score=0,i._timer=.5,i._vWidth=414,i._vHeight=896,i._blockSize=34,i._playBgW=358,i._playBgH=718,i._playBgTop=89,i._playBgBottom=89,i._playBgLeft=28,i._playBgRight=28,i.box=[],i.curBlock=null,i.curBlockP1=null,i.curBlockP2=null,i.curBlockP3=null,i.curBlockP4=null,i.curBlockP1Pos=null,i.curBlockP2Pos=null,i.curBlockP3Pos=null,i.curBlockP4Pos=null,i.gameState=null,i}o(i,t);var e=i.prototype;return e.start=function(){this.initBgBlock(),this.scoreValue.string="0"},e.update=function(t){},e.onLoad=function(){this.fitDevice()},e.fitDevice=function(){var t;(k("加载的时候，最新的尺寸"),k(B.windowSize),this._vHeight=B.windowSize.width>900?B.windowSize.height/3:B.windowSize.height/2,this._vWidth=B.windowSize.width>900?B.windowSize.width/3:B.windowSize.width/2,this._vWidth<=375)&&(this._playBgTop=56,this._playBgBottom=44,this._playBgH=this._vHeight-this._playBgTop-this._playBgBottom,this._blockSize=(this._playBgH-38)/20,this._playBgW=10*this._blockSize+18,this._playBgLeft=(this._vWidth-this._playBgW)/2,this._playBgRight=(this._vWidth-this._playBgW)/2,a("Canvas/GameCont/GCPlayGroundMask/GCBgPlayGround").active=!1);this.scoreValue.string=B.windowSize.toString();var i=a("Canvas/GameCont/GCPlayGroundMask"),o=null==i?void 0:i.getComponent(P);o.top=this._playBgTop,o.bottom=this._playBgBottom,o.left=this._playBgLeft,o.right=this._playBgRight,null==(t=i.getComponent(b))||t.setContentSize(this._playBgW,this._playBgH)},e.initBgBlock=function(){k("初始化程序");for(var t=0;t<200;t++){var i=p(this.gbBlock);i.getComponent(b).setContentSize(this._blockSize,this._blockSize),i.parent=this.gcBgLayout}},e.initBox=function(){for(var t=0;t<24;t++){this.box[t]=[];for(var i=0;i<10;i++)this.box[t][i]=null}this.initGameBlock()},e.initGameBlock=function(){this.rand=Math.floor(7*Math.random()),this.createBlockColor(this.rand),this.createBlockShape(this.rand)},e.createBlockColor=function(t){var i,o,s,c;switch(t){case 0:k("初始化正方形颜色"),this.curBlockP1=p(this.gameBlock0),this.curBlockP2=p(this.gameBlock0),this.curBlockP3=p(this.gameBlock0),this.curBlockP4=p(this.gameBlock0),this.curBlock=p(this.gameBlockCenter),this.curBlock.parent=this.gcLayout,this.curBlock.setPosition(0,this._playBgH/2+3+this._blockSize),k("正方形颜色的位置,",this.curBlock.position);break;case 1:k("初始化Z形颜色"),this.curBlockP1=p(this.gameBlock1),this.curBlockP2=p(this.gameBlock1),this.curBlockP3=p(this.gameBlock1),this.curBlockP4=p(this.gameBlock1),this.curBlock=p(this.gameBlockCenter),this.curBlock.parent=this.gcLayout,this.curBlock.setPosition(this._blockSize/2+2,this._playBgH/2+1.5*this._blockSize+4),k("Z颜色的位置,",this.curBlock.position);break;case 2:k("初始化反Z形颜色"),this.curBlockP1=p(this.gameBlock2),this.curBlockP2=p(this.gameBlock2),this.curBlockP3=p(this.gameBlock2),this.curBlockP4=p(this.gameBlock2),this.curBlock=p(this.gameBlockCenter),this.curBlock.parent=this.gcLayout,this.curBlock.setPosition(this._blockSize/2+2,this._playBgH/2+1.5*this._blockSize+4),k("反Z颜色的位置,",this.curBlock.position);break;case 3:k("初始化左L形颜色"),this.curBlockP1=p(this.gameBlock3),this.curBlockP2=p(this.gameBlock3),this.curBlockP3=p(this.gameBlock3),this.curBlockP4=p(this.gameBlock3),this.curBlock=p(this.gameBlockCenter),this.curBlock.parent=this.gcLayout,this.curBlock.setPosition(this._blockSize/2+2,this._playBgH/2+1.5*this._blockSize+4),k("左L颜色的位置,",this.curBlock.position);break;case 4:k("初始化右L形颜色"),this.curBlockP1=p(this.gameBlock4),this.curBlockP2=p(this.gameBlock4),this.curBlockP3=p(this.gameBlock4),this.curBlockP4=p(this.gameBlock4),this.curBlock=p(this.gameBlockCenter),this.curBlock.parent=this.gcLayout,this.curBlock.setPosition(this._blockSize/2+2,this._playBgH/2+1.5*this._blockSize+4),k("右L颜色的位置,",this.curBlock.position);break;case 5:k("初始化T形颜色"),this.curBlockP1=p(this.gameBlock5),this.curBlockP2=p(this.gameBlock5),this.curBlockP3=p(this.gameBlock5),this.curBlockP4=p(this.gameBlock5),this.curBlock=p(this.gameBlockCenter),this.curBlock.parent=this.gcLayout,this.curBlock.setPosition(this._blockSize/2+2,this._playBgH/2+this._blockSize/2+2),k("T颜色的位置,",this.curBlock.position);break;case 6:k("初始化长形颜色"),this.curBlockP1=p(this.gameBlock6),this.curBlockP2=p(this.gameBlock6),this.curBlockP3=p(this.gameBlock6),this.curBlockP4=p(this.gameBlock6),this.curBlock=p(this.gameBlockCenter),this.curBlock.parent=this.gcLayout,this.curBlock.setPosition(this._blockSize/2+2,this._playBgH/2+1.5*this._blockSize+4),k("T颜色的位置,",this.curBlock.position)}null==(i=this.curBlockP1.getComponent(b))||i.setContentSize(this._blockSize,this._blockSize),null==(o=this.curBlockP2.getComponent(b))||o.setContentSize(this._blockSize,this._blockSize),null==(s=this.curBlockP3.getComponent(b))||s.setContentSize(this._blockSize,this._blockSize),null==(c=this.curBlockP4.getComponent(b))||c.setContentSize(this._blockSize,this._blockSize),this.curBlock.addChild(this.curBlockP1),this.curBlock.addChild(this.curBlockP2),this.curBlock.addChild(this.curBlockP3),this.curBlock.addChild(this.curBlockP4)},e.createBlockShape=function(t){switch(t){case 0:k("初始化正方形"),this.curBlockP1.setPosition(this._blockSize/2+1,this._blockSize/2+1),this.curBlockP2.setPosition(-(this._blockSize/2+1),this._blockSize/2+1),this.curBlockP3.setPosition(this._blockSize/2+1,-(this._blockSize/2+1)),this.curBlockP4.setPosition(-(this._blockSize/2+1),-(this._blockSize/2+1)),this.curBlockP1Pos=y(21,5),this.curBlockP2Pos=y(21,4),this.curBlockP3Pos=y(20,5),this.curBlockP4Pos=y(20,4);break;case 1:k("初始化Z形"),this.curBlockP1.setPosition(-(this._blockSize+2),0),this.curBlockP2.setPosition(0,0),this.curBlockP3.setPosition(0,-(this._blockSize+2)),this.curBlockP4.setPosition(this._blockSize+2,-(this._blockSize+2)),this.curBlockP1Pos=y(21,4),this.curBlockP2Pos=y(21,5),this.curBlockP3Pos=y(20,5),this.curBlockP4Pos=y(20,6);break;case 2:k("初始化反Z形"),this.curBlockP1.setPosition(this._blockSize+2,0),this.curBlockP2.setPosition(0,0),this.curBlockP3.setPosition(0,-(this._blockSize+2)),this.curBlockP4.setPosition(-(this._blockSize+2),-(this._blockSize+2)),this.curBlockP1Pos=y(21,6),this.curBlockP2Pos=y(21,5),this.curBlockP3Pos=y(20,5),this.curBlockP4Pos=y(20,4);break;case 3:k("初始化左L形"),this.curBlockP1.setPosition(0,this._blockSize+2),this.curBlockP2.setPosition(0,0),this.curBlockP3.setPosition(0,-(this._blockSize+2)),this.curBlockP4.setPosition(this._blockSize+2,-(this._blockSize+2)),this.curBlockP1Pos=y(22,5),this.curBlockP2Pos=y(21,5),this.curBlockP3Pos=y(20,5),this.curBlockP4Pos=y(20,6);break;case 4:k("初始化右L形"),this.curBlockP1.setPosition(0,this._blockSize+2),this.curBlockP2.setPosition(0,0),this.curBlockP3.setPosition(0,-(this._blockSize+2)),this.curBlockP4.setPosition(-(this._blockSize+2),-(this._blockSize+2)),this.curBlockP1Pos=y(22,5),this.curBlockP2Pos=y(21,5),this.curBlockP3Pos=y(20,5),this.curBlockP4Pos=y(20,4);break;case 5:k("初始化T形"),this.curBlockP1.setPosition(0,this._blockSize+2),this.curBlockP2.setPosition(0,0),this.curBlockP3.setPosition(-(this._blockSize+2),0),this.curBlockP4.setPosition(this._blockSize+2,0),this.curBlockP1Pos=y(21,5),this.curBlockP2Pos=y(20,5),this.curBlockP3Pos=y(20,4),this.curBlockP4Pos=y(20,6);break;case 6:k("初始化竖形"),this.curBlockP1.setPosition(0,2*(this._blockSize+2)),this.curBlockP2.setPosition(0,this._blockSize+2),this.curBlockP3.setPosition(0,0),this.curBlockP4.setPosition(0,-(this._blockSize+2)),this.curBlockP1Pos=y(23,5),this.curBlockP2Pos=y(22,5),this.curBlockP3Pos=y(21,5),this.curBlockP4Pos=y(20,5)}this.checkCurrentBlockPos()},e.isClashBottom=function(){return this.curBlockP1Pos.x-1<0||this.curBlockP2Pos.x-1<0||this.curBlockP3Pos.x-1<0||this.curBlockP4Pos.x-1<0},e.isClashBottomBlock=function(){return k(this.box),k(this.box[this.curBlockP1Pos.x-1][this.curBlockP1Pos.y]),null!=this.box[this.curBlockP1Pos.x-1][this.curBlockP1Pos.y]&&!this.isCurrentBlockChild(this.box[this.curBlockP1Pos.x-1][this.curBlockP1Pos.y])||null!=this.box[this.curBlockP2Pos.x-1][this.curBlockP2Pos.y]&&!this.isCurrentBlockChild(this.box[this.curBlockP2Pos.x-1][this.curBlockP2Pos.y])||null!=this.box[this.curBlockP3Pos.x-1][this.curBlockP3Pos.y]&&!this.isCurrentBlockChild(this.box[this.curBlockP3Pos.x-1][this.curBlockP3Pos.y])||null!=this.box[this.curBlockP4Pos.x-1][this.curBlockP4Pos.y]&&!this.isCurrentBlockChild(this.box[this.curBlockP4Pos.x-1][this.curBlockP4Pos.y])},e.isClashLeft=function(){return this.curBlockP1Pos.y-1<0||this.curBlockP2Pos.y-1<0||this.curBlockP3Pos.y-1<0||this.curBlockP4Pos.y-1<0},e.isClashLeftBlock=function(){return k(this.box),k(this.box[this.curBlockP1Pos.x][this.curBlockP1Pos.y-1]),null!=this.box[this.curBlockP1Pos.x][this.curBlockP1Pos.y-1]&&!this.isCurrentBlockChild(this.box[this.curBlockP1Pos.x][this.curBlockP1Pos.y-1])||null!=this.box[this.curBlockP2Pos.x][this.curBlockP2Pos.y-1]&&!this.isCurrentBlockChild(this.box[this.curBlockP2Pos.x][this.curBlockP2Pos.y-1])||null!=this.box[this.curBlockP3Pos.x][this.curBlockP3Pos.y-1]&&!this.isCurrentBlockChild(this.box[this.curBlockP3Pos.x][this.curBlockP3Pos.y-1])||null!=this.box[this.curBlockP4Pos.x][this.curBlockP4Pos.y-1]&&!this.isCurrentBlockChild(this.box[this.curBlockP4Pos.x][this.curBlockP4Pos.y-1])},e.isClashRight=function(){return this.curBlockP1Pos.y+1>9||this.curBlockP2Pos.y+1>9||this.curBlockP3Pos.y+1>9||this.curBlockP4Pos.y+1>9},e.isClashRightBlock=function(){return k(this.box),k(this.box[this.curBlockP1Pos.x][this.curBlockP1Pos.y+1]),null!=this.box[this.curBlockP1Pos.x][this.curBlockP1Pos.y+1]&&!this.isCurrentBlockChild(this.box[this.curBlockP1Pos.x][this.curBlockP1Pos.y+1])||null!=this.box[this.curBlockP2Pos.x][this.curBlockP2Pos.y+1]&&!this.isCurrentBlockChild(this.box[this.curBlockP2Pos.x][this.curBlockP2Pos.y+1])||null!=this.box[this.curBlockP3Pos.x][this.curBlockP3Pos.y+1]&&!this.isCurrentBlockChild(this.box[this.curBlockP3Pos.x][this.curBlockP3Pos.y+1])||null!=this.box[this.curBlockP4Pos.x][this.curBlockP4Pos.y+1]&&!this.isCurrentBlockChild(this.box[this.curBlockP4Pos.x][this.curBlockP4Pos.y+1])},e.rotateShape=function(){k("旋转图形"),this.rotateShapePart(this.curBlockP1,this.curBlockP1Pos),this.rotateShapePart(this.curBlockP2,this.curBlockP2Pos),this.rotateShapePart(this.curBlockP3,this.curBlockP3Pos),this.rotateShapePart(this.curBlockP4,this.curBlockP4Pos)},e.rotateShapePart=function(t,i){k(t.position);var o=Math.abs(t.position.x/(this._blockSize+2)),s=Math.abs(t.position.y/(this._blockSize+2)),c=Math.max(o,s);0==t.position.x&&t.position.y>0?(i.x-=c,i.y+=c,t.setPosition(t.position.y,t.position.x)):t.position.x>0&&0==t.position.y?(i.x-=c,i.y-=c,t.setPosition(t.position.y,-t.position.x)):0==t.position.x&&t.position.y<0?(i.x+=c,i.y-=c,t.setPosition(t.position.y,t.position.x)):t.position.x<0&&0==t.position.y?(i.x+=c,i.y+=c,t.setPosition(t.position.y,-t.position.x)):t.position.x>0&&t.position.y>0?(k("从右上顺时针旋转"),t.position.x>=this._blockSize+2&&t.position.y>=this._blockSize+2?i.x-=2:i.x-=1,t.setPosition(t.position.x,-t.position.y)):t.position.x>0&&t.position.y<0?(k("从右下顺时针旋转"),t.position.x>=this._blockSize+2&&t.position.y<=-(this._blockSize+2)?i.y-=2:i.y-=1,t.setPosition(-t.position.x,t.position.y)):t.position.x<0&&t.position.y<0?(k("从左下顺时针旋转"),t.position.x<=-(this._blockSize+2)&&t.position.y<=-(this._blockSize+2)?i.x+=2:i.x+=1,t.setPosition(t.position.x,-t.position.y)):t.position.x<0&&t.position.y>0&&(k("从左上顺时针旋转"),t.position.x<=-(this._blockSize+2)&&t.position.y>=this._blockSize+2?i.y+=2:i.y+=1,t.setPosition(-t.position.x,t.position.y)),k("旋转后最新对位置：",t.position)},e.isCurrentBlockChild=function(t){for(var i=0;i<4;i++)if(t===this.curBlock.children[i])return!0;return!1},e.checkCurrentBlockPos=function(){this.box[this.curBlockP1Pos.x][this.curBlockP1Pos.y]=this.curBlockP1,this.box[this.curBlockP2Pos.x][this.curBlockP2Pos.y]=this.curBlockP2,this.box[this.curBlockP3Pos.x][this.curBlockP3Pos.y]=this.curBlockP3,this.box[this.curBlockP4Pos.x][this.curBlockP4Pos.y]=this.curBlockP4},e.deleteCurrentBlockPos=function(){this.box[this.curBlockP1Pos.x][this.curBlockP1Pos.y]=null,this.box[this.curBlockP2Pos.x][this.curBlockP2Pos.y]=null,this.box[this.curBlockP3Pos.x][this.curBlockP3Pos.y]=null,this.box[this.curBlockP4Pos.x][this.curBlockP4Pos.y]=null},e.autoDown=function(){k("最新的_timer是：",this._timer),this.isClashBottom()?(k("碰到底部了"),k(this.curBlock.position),this.deleteRow(),this.initGameBlock()):this.isClashBottomBlock()?(k("碰到下面的方块了"),k(this.curBlock.position),this.isGameOver(),this.deleteRow(),this.initGameBlock()):(this.curBlock.setPosition(this.curBlock.position.x,this.curBlock.position.y-(this._blockSize+2)),this.deleteCurrentBlockPos(),this.curBlockP1Pos.x-=1,this.curBlockP2Pos.x-=1,this.curBlockP3Pos.x-=1,this.curBlockP4Pos.x-=1,this.checkCurrentBlockPos())},e.deleteRow=function(){for(var t=0;t<18;t++){for(var i=0,o=0;o<10;o++)null!=this.box[t][o]&&i++;if(10==i){for(var s=0;s<10;s++)this.box[t][s].removeFromParent(),this.box[t][s]=null,a("GameMusic").emit("cleanOneLine"),this._score+=1;this.rowDown(t),t--}}this.scoreValue.string=this._score.toString(),this._score<100?(this._timer=.5,this.unschedule(this.autoDown),this.schedule(this.autoDown,this._timer)):this._score<250?(this._timer=.4,this.unschedule(this.autoDown),this.schedule(this.autoDown,this._timer)):this._score<500?(this._timer=.35,this.unschedule(this.autoDown),this.schedule(this.autoDown,this._timer)):this._score<1e3?(this._timer=.25,this.unschedule(this.autoDown),this.schedule(this.autoDown,this._timer)):(this._timer=.2,this.unschedule(this.autoDown),this.schedule(this.autoDown,this._timer))},e.rowDown=function(t){for(var i=t,o=0;o<10;o++)for(var s=-1,c=i;c<18;c++)s++,null!=this.box[c][o]&&(this.box[c-1][o]=this.box[c][o],this.box[c][o].setPosition(this.box[c][o].position.x,this.box[c][o].position.y-(this._blockSize+2)),null==this.box[c+1][o]&&(this.box[s+i][o]=null))},e.onKeyDown=function(t){switch(t.keyCode){case g.ARROW_LEFT:if(k("左移动"),a("GameMusic").emit("rotate"),this.leftBtn.node.setScale(.8,.8),this.isClashLeft())break;if(this.isClashLeftBlock())break;this.curBlock.setPosition(this.curBlock.position.x-(this._blockSize+2),this.curBlock.position.y),this.deleteCurrentBlockPos(),this.curBlockP1Pos.y-=1,this.curBlockP2Pos.y-=1,this.curBlockP3Pos.y-=1,this.curBlockP4Pos.y-=1,this.checkCurrentBlockPos();break;case g.ARROW_RIGHT:if(k("右移动"),a("GameMusic").emit("rotate"),this.rightBtn.node.setScale(.8,.8),this.isClashRight())break;if(this.isClashRightBlock())break;this.curBlock.setPosition(this.curBlock.position.x+(this._blockSize+2),this.curBlock.position.y),this.deleteCurrentBlockPos(),this.curBlockP1Pos.y+=1,this.curBlockP2Pos.y+=1,this.curBlockP3Pos.y+=1,this.curBlockP4Pos.y+=1,this.checkCurrentBlockPos();break;case g.ARROW_UP:if(a("GameMusic").emit("rotate"),this.topBtn.node.setScale(.8,.8),this.isClashBottom())break;if(this.isClashBottomBlock())break;if(this.isClashLeft())break;if(this.isClashLeftBlock())break;if(this.isClashRight())break;if(this.isClashRightBlock())break;this.deleteCurrentBlockPos(),this.rotateShape(),this.checkCurrentBlockPos();break;case g.ARROW_DOWN:if(k("下移动"),a("GameMusic").emit("rotate"),this.bottomBtn.node.setScale(.8,.8),this.isClashBottom())break;if(this.isClashBottomBlock())break;this.curBlock.setPosition(this.curBlock.position.x,this.curBlock.position.y-(this._blockSize+2)),this.deleteCurrentBlockPos(),this.curBlockP1Pos.x-=1,this.curBlockP2Pos.x-=1,this.curBlockP3Pos.x-=1,this.curBlockP4Pos.x-=1,this.checkCurrentBlockPos()}},e.onKeyUp=function(t){switch(t.keyCode){case g.ARROW_LEFT:this.leftBtn.node.setScale(1,1);break;case g.ARROW_RIGHT:this.rightBtn.node.setScale(1,1);break;case g.ARROW_UP:this.topBtn.node.setScale(1,1);break;case g.ARROW_DOWN:this.bottomBtn.node.setScale(1,1)}},e.clickLeft=function(){k("点击left");var t=this.leftBtn.node;t.on(m.EventType.TOUCH_START,(function(){return t.setScale(.8,.8)})),t.on(m.EventType.TOUCH_END,(function(){return t.setScale(1,1)})),a("GameMusic").emit("rotate"),this.isClashLeft()||this.isClashLeftBlock()||(this.curBlock.setPosition(this.curBlock.position.x-(this._blockSize+2),this.curBlock.position.y),this.deleteCurrentBlockPos(),this.curBlockP1Pos.y-=1,this.curBlockP2Pos.y-=1,this.curBlockP3Pos.y-=1,this.curBlockP4Pos.y-=1,this.checkCurrentBlockPos())},e.clickRight=function(){k("点击right");var t=this.rightBtn.node;t.on(m.EventType.TOUCH_START,(function(){return t.setScale(.8,.8)})),t.on(m.EventType.TOUCH_END,(function(){return t.setScale(1,1)})),a("GameMusic").emit("rotate"),this.isClashRight()||this.isClashRightBlock()||(this.curBlock.setPosition(this.curBlock.position.x+(this._blockSize+2),this.curBlock.position.y),this.deleteCurrentBlockPos(),this.curBlockP1Pos.y+=1,this.curBlockP2Pos.y+=1,this.curBlockP3Pos.y+=1,this.curBlockP4Pos.y+=1,this.checkCurrentBlockPos())},e.clickTop=function(){k("点击top");var t=this.topBtn.node;t.on(m.EventType.TOUCH_START,(function(){return t.setScale(.8,.8)})),t.on(m.EventType.TOUCH_END,(function(){return t.setScale(1,1)})),a("GameMusic").emit("rotate"),this.isClashBottom()||this.isClashBottomBlock()||this.isClashLeft()||this.isClashLeftBlock()||this.isClashRight()||this.isClashRightBlock()||(this.deleteCurrentBlockPos(),this.rotateShape(),this.checkCurrentBlockPos())},e.clickBottom=function(){k("点击bottom");var t=this.bottomBtn.node;t.on(m.EventType.TOUCH_START,(function(){return t.setScale(.8,.8)})),t.on(m.EventType.TOUCH_END,(function(){return t.setScale(1,1)})),a("GameMusic").emit("rotate"),this.isClashBottom()||this.isClashBottomBlock()||(this.curBlock.setPosition(this.curBlock.position.x,this.curBlock.position.y-(this._blockSize+2)),this.deleteCurrentBlockPos(),this.curBlockP1Pos.x-=1,this.curBlockP2Pos.x-=1,this.curBlockP3Pos.x-=1,this.curBlockP4Pos.x-=1,this.checkCurrentBlockPos())},e.gameStart=function(){var t=a("Canvas/GameWelcome"),i=a("Canvas/GameOver");t.active=!1,i.active=!1,this.gameState=1,_.on(m.EventType.KEY_DOWN,this.onKeyDown,this),_.on(m.EventType.KEY_UP,this.onKeyUp,this),this.initBox(),this.schedule(this.autoDown,this._timer)},e.gameResume=function(){this.gameState=1},e.gamePause=function(){this.gameState=2},e.gameOver=function(){this.gameState=0,a("Canvas/GameOver").active=!0,a("GameMusic").emit("gameover"),a("GameMusic").emit("bgmStop"),this.unschedule(this.autoDown),this.enabled=!1,_.off(m.EventType.KEY_DOWN,this.onKeyDown,this),_.off(m.EventType.KEY_UP,this.onKeyUp,this)},e.gameRestart=function(){this.gameState=1,a("Canvas/GameOver").active=!1,this.enabled=!0,this.gcLayout.removeAllChildren(),_.on(m.EventType.KEY_DOWN,this.onKeyDown,this),_.on(m.EventType.KEY_UP,this.onKeyUp,this),this._score=0,this.scoreValue.string=this._score.toString(),this._timer=.5,this.initBox(),this.schedule(this.autoDown,this._timer)},e.isGameOver=function(){for(var t=18;t<20;t++)for(var i=0;i<10;i++)null!=this.box[t][i]&&this.gameOver()},i}(x)).prototype,"gcBgLayout",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(A.prototype,"gbBlock",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=i(A.prototype,"gcLayout",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=i(A.prototype,"gameBlock0",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=i(A.prototype,"gameBlock1",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(A.prototype,"gameBlock2",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(A.prototype,"gameBlock3",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(A.prototype,"gameBlock4",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=i(A.prototype,"gameBlock5",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(A.prototype,"gameBlock6",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=i(A.prototype,"leftBtn",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=i(A.prototype,"topBtn",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=i(A.prototype,"rightBtn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=i(A.prototype,"bottomBtn",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=i(A.prototype,"gameBlockCenter",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=i(A.prototype,"testLayout",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=i(A.prototype,"scoreValue",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=A))||K));e._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./core.ts","./music.ts"],(function(){"use strict";return{setters:[null,null],execute:function(){}}}));

System.register("chunks:///_virtual/music.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,o,e,i,r,u,s,c,a;return{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,u=t._decorator,s=t.AudioSource,c=t.AudioClip,a=t.Component}],execute:function(){var l,f,p,d,h,y,m;r._RF.push({},"486c57woVxOxbaB0yP15dx4","music",void 0);var v=u.ccclass,b=u.property;t("music",(l=v("music"),f=b(s),p=b([c]),l((y=n((h=function(t){function n(){for(var n,o=arguments.length,r=new Array(o),u=0;u<o;u++)r[u]=arguments[u];return n=t.call.apply(t,[this].concat(r))||this,e(n,"soundControl",y,i(n)),e(n,"effects",m,i(n)),n}o(n,t);var r=n.prototype;return r.start=function(){},r.update=function(t){},r.onLoad=function(){this.initMusicEvent()},r.initMusicEvent=function(){var t=this;this.node.on("bgm",(function(){return t.soundControl.play()}),this),this.node.on("bgmStop",(function(){return t.soundControl.stop()}),this),this.node.on("gameover",(function(){return t.soundControl.playOneShot(t.effects[0],.7)}),this),this.node.on("cleanOneLine",(function(){return t.soundControl.playOneShot(t.effects[0],.6)}),this),this.node.on("rotate",(function(){return t.soundControl.playOneShot(t.effects[1],.6)}),this)},n}(a)).prototype,"soundControl",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=n(h.prototype,"effects",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=h))||d));r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});